<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>尝试</title>
	<style type="text/css">
		canvas {
			border: 1px solid black;
		}
		@font-face {
			font-family:'wawa';
			src:url('wawa.ttf');
		}
	</style>
</head>
<body>
	<div id="catCan">
		<!-- 插canvas的地方 -->
	</div>
</body>
<script type="text/javascript" src="catCanFrameWork3.2.0.js"></script>
<script type="text/javascript" src="../CatTool1.1.1.js"></script>
<script type="text/javascript" src="jsonCan.js"></script>
<script type="text/javascript">
	var m=5,n=8;
	window.onload = function () {
		makeJsonCan("picture.jpg",m,n,init);
	};
	function init(json) {
		var hide = json.hide;
		var catCan = new CatCan("catCan",json,"flag",0);//只有前两个是必须的
		catCan.addListener(catCan.canvas,function(mouse) {
			for(var i=0;i<40;i++) {
				mouse.click(0,i,function() {
					if(hide==i-1||hide==i+1
						||hide==i-n||hide==i+n) {
						console.log("空白块为"+i);
						var tmp = catCan.catTreePlay[0].ani[i+1][1];//三行图层的img
						catCan.catTreePlay[0].ani[i+1][1] = catCan.catTreePlay[0].ani[hide+1][1];
						catCan.catTreePlay[0].ani[hide+1][1] = tmp;
						tmp = hide;//三行角标
						hide = i;
						i = tmp;
					}
				});
			}
		});
	};
		//var url = "data.json"
		//var request = new XMLHttpRequest();
		//request.open("get",url);
		//request.send(null);
		//request.onload = function() {
			//if (request.status==200) {
				//var json = JSON.parse(request.responseText);
				///////////////////////////////////////////////////////////////////
				//var catCan = new CatCan("catCan",json,"flag",{w:1800,h:900,t:0.5},0);//只有前两个是必须的
				//var p = catCan.queryDS("wrTxt");
				//var q = catCan.query("wrTxt",1);
				/*for(var i=0;i<300;i++) {
					setTimeout(function(){
						//for(var j in p)
							//p[j].wait.push(String(new Date()));
						//catCan.setDS(0,3,1,{"wait":[String(new Date())]});
						//catCan.setDS(0,4,1,{"wait":[String(new Date())]});
						catCan.setDS(q,{"wait":[String(new Date())]});
					},i*3000);
				}*/
				//catCan.addListener(catCan.canvas,function(mouse) {
					//mouse.click(0,3,function() {
						//console.log(catCan.setDS(0,3,1));
						//catCan.setDS(0,3,1,{"wait":[String("23333")]});
					//});
					//mouse.click(0,4,function() {
						//console.log(catCan.setDS(0,3,1));
						//catCan.setDS();
					//});
				//});
				//catCan.addListener(catCan.canvas,function(mouse) {
					//mouse.drag(0,3);
					//mouse.follow(0,4,30,30);//鼠标在图片的位置为30,30
				//});
				//////////////////////////////////////////////////////////////////
			//}
		//}
	//}
</script>
</html>